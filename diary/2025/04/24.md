# 今日学んだこと

## 取り組んだ課題一覧
- ハッカソン(2h)
    - infra
         -  インフラ設計・アーキテクチャ図修正
- 技術記事執筆（2h）
    - インフラ構成と設計のすれ違いから学んだモノリス設計の落とし穴(途中) 
         - 初めてのインフラ構築経験～現在参加中のハッカソンで取り組んでいるインフラ設計の振り返り

## わかったこと
- Backend側でのFargate（Nginx → FastAPI）の構成について、**Nginxは本当に必要なのか？** 
    - Python を使ったアプリケーション開発においては、Nginx を使ってリバースプロキシを立てるのが一般的
    - 今回の構成でNginxが不要と考える理由：
         - Frontend側は、CloudFront + S3による静的ファイル配信となるため、Nginx は不要（Nginx を介さずとも十分なパフォーマンスが期待できる ）
         - HTTPS終端や負荷分散、ヘルスチェック などの役割はALB（Application Load Balancer）で担っているため、Nginx による追加の処理が冗長になる可能性がある
    - 今回の設計でNginx を導入することによる影響：
         - Nginx 用の Dockerfile 作成
         - Fargate タスク定義での複数コンテナのリバースプロキシ設定
         - その他、メンテナンスの工数
- FastAPI + Uvicornという構成と、ALB による SSL 終端やタイムアウト設定などの機能を組み合わせれば、**Nginx の導入は不要**

![alt text](image-20250424.png)

## 感じたこと
- 一般的な慣習にとらわれていたことへの気づき
    - Pythonアプリケーション開発における「Nginxを使うのが普通」という思い込みから、構成上本当に必要かどうかの検討を十分にせずに設計を進めていたことに気づいた
    - これは、自身の設計に対する見通しの甘さや、既成概念に頼りすぎた姿勢を反省すべき点だと感じた
- 構成要素の役割理解の重要性
    - **ALB**が**HTTPS終端**、**負荷分散**、**ヘルスチェック**などの役割を担うことを改めて理解し、それによりNginxが果たすべき役割が限定的または冗長になることを知った
    - アーキテクチャの各要素が「**何を担っているのか**」「**何を代替できるのか**」を正確に把握する重要性を再認識した
- 保守性や運用負荷の観点が抜けていた
    - Nginxを導入することで、Dockerfileの追加や複数コンテナの連携設定、さらにはメンテナンス工数が発生することを設計当初は十分に考慮できていなかった
    - これは、インフラ構成を「動けばよい」ではなく、**運用のしやすさ**・**スリムさ**まで考慮すべきであるという教訓になった
- 最小構成でのシンプルな設計の価値
    - FastAPI + Uvicorn + ALBで十分に構成が成立することを知り、無駄を削ぎ落としたシンプルな設計が持つ価値や合理性に気づくことができた
    - 「**必要最小限の構成で最大限の効果を得る**」という設計の本質を意識して開発をしなければいけない

## 次やること
- backend
    - RDSパラメータ設計
- infra
    - インフラ設計・アーキテクチャ図修正

## 学習時間
- Today: 4h
- week : 13h 30m
- Total: 25h 15m